# 实践指南

1. 根据实践通常个人电脑存放的单表数据量最好不要操作100w，不然容易查询困难和内存过大等一系列问题
2. 如果数据量过大的情况下可以分表或者使用外键等一系列手段来实现多非单进程的查询

# MySQL 单表数据量限制指南

## 一、理论限制

MySQL 单表的理论存储上限主要取决于以下因素：

1. **存储引擎限制**
    - InnoDB: 64TB (MySQL 5.7+)
    - MyISAM: 256TB

2. **行数限制**
    - 理论行数上限约 2^64 条（约 1.84×10^19）
    - 实际受存储空间和性能限制

## 二、实际建议限制

| 指标     | 建议值                   | 说明          |
|--------|-----------------------|-------------|
| 数据量    | < 500万-1000万行         | 超过后查询性能明显下降 |
| 数据大小   | < 10GB                | 超过后备份/维护困难  |
| 单表字段数  | < 30个                 | 避免过宽表       |
| 单行数据大小 | < 8KB (InnoDB页大小16KB) | 避免行溢出       |

## 三、性能拐点参考

1. **100万行以下**：性能优良
2. **100万-500万行**：需要优化索引
3. **500万-1000万行**：考虑分表
4. **1000万行以上**：强烈建议分表分库

## 四、优化建议

1. **垂直分表**：将不常用字段拆分到扩展表
2. **水平分表**：按时间/ID范围拆分
3. **归档历史数据**：定期迁移冷数据
4. **使用分区表**：MySQL 5.7+支持的分区功能

## 五、监控指标

当出现以下情况时应考虑拆分表：

- 查询响应时间 > 500ms
- 索引大小超过内存的1/4
- ALTER TABLE 操作超过1小时
- 备份单表时间 > 30分钟